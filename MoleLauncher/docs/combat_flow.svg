<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1214px" preserveAspectRatio="none" style="width:1551px;height:1214px;" version="1.1" viewBox="0 0 1551 1214" width="1551px" zoomAndPan="magnify"><defs><filter height="300%" id="fz2qt3jwlhjiu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="753.75" cy="20" fill="#000000" filter="url(#fz2qt3jwlhjiu)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="637.75" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="212" x="647.75" y="71.1387">MootyWortRpgMech.enterCombat()</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="617.25" y="103.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="253" x="627.25" y="125.1074">Combat.controllerState = beginNewRound</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="702.25" y="201.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="712.25" y="223.0762">stepCombat()</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="34.5,255.9063,181.5,255.9063,193.5,267.9063,181.5,279.9063,34.5,279.9063,22.5,267.9063,34.5,255.9063" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="112" y="290.1167">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="34.5" y="271.7144">state == beginNewRound</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="38" y="311.6167"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="48" y="332.7554">processRoundTop()</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="10" y="380.5854"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="20" y="401.7241">status effects are processed</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="60" x="78" y="497.9565"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="88" y="519.0952">runAI()</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="71,449.5542,145,449.5542,157,461.5542,145,473.5542,71,473.5542,59,461.5542,71,449.5542" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="112" y="483.7646">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="71" y="465.3623">combat end?</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="108,556.3276,120,568.3276,108,580.3276,96,568.3276,108,556.3276" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="425,255.9063,544,255.9063,556,267.9063,544,279.9063,425,279.9063,413,267.9063,425,255.9063" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="488.5" y="290.1167">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="425" y="271.7144">state == playerInput</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="337.5" y="311.6167"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="274" x="347.5" y="332.7554">combat.telegraphAction(enemychosenAbility)</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="388.5" y="380.5854"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="398.5" y="401.7241">displayTelegraph(teleString)</text><rect fill="#FFFFFF" filter="url(#fz2qt3jwlhjiu)" height="572.875" style="stroke: #000000; stroke-width: 2.0;" width="644.5" x="216" y="449.5542"/><path d="M365,450.5542 L365,458.8511 L355,468.8511 L216,468.8511 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="219" y="463.5493">commandSelection</text><path d="M610.5,485.8511 L610.5,517.1167 L590.5,521.1167 L610.5,525.1167 L610.5,556.3823 A0,0 0 0 0 610.5,556.3823 L850.5,556.3823 A0,0 0 0 0 850.5,556.3823 L850.5,495.8511 L840.5,485.8511 L610.5,485.8511 A0,0 0 0 0 610.5,485.8511 " fill="#FBFB77" filter="url(#fz2qt3jwlhjiu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M840.5,485.8511 L840.5,495.8511 L850.5,495.8511 L840.5,485.8511 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="616.5" y="502.918">commands such as 'magic' will</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="616.5" y="518.0508">open sub menus, and leaf node</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="616.5" y="533.1836">command will actually execute an</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="616.5" y="548.3164">ability</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="212" x="378.5" y="497.1479"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="388.5" y="518.2866">define onclick() cb functions for</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="388.5" y="532.2554">available command UI</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="396,591.3823,573,591.3823,585,603.3823,573,615.3823,396,615.3823,384,603.3823,396,591.3823" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="396" y="607.1904">selected ability is single target</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="363" y="600.7881">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="585" y="600.7881">no</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="75.875" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="239" y="625.3823"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="185" x="249" y="646.521">the command listitem onclick()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="249" y="660.4897">will define onclick() for</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="249" y="674.4585">possible targets that runs</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="249" y="688.4272">the ability and advances combat</text><rect fill="#FFFFFF" filter="url(#fz2qt3jwlhjiu)" height="244.1719" style="stroke: #000000; stroke-width: 2.0;" width="237" x="228" y="736.2573"/><path d="M352,737.2573 L352,745.5542 L342,755.5542 L228,755.5542 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="231" y="750.2524">targetSelection</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="253" y="772.5542"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="263" y="793.6929">player selects target image</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="238" y="826.5229"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="197" x="248" y="847.6616">run the ability on selected target</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="260" y="880.4917"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="153" x="270" y="901.6304">print result to combat log</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="283" y="934.4604"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="293" y="955.5991">state = runEnemy</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="275" x="485" y="625.3823"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="255" x="495" y="646.521">run the ability on appropriate target group</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="536" y="694.3511"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="153" x="546" y="715.4897">print result to combat log</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="559" y="763.3198"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="569" y="784.4585">state = runEnemy</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="484.5,986.4292,496.5,998.4292,484.5,1010.4292,472.5,998.4292,484.5,986.4292" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="1136.75,255.9063,1249.75,255.9063,1261.75,267.9063,1249.75,279.9063,1136.75,279.9063,1124.75,267.9063,1136.75,255.9063" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="1197.25" y="290.1167">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="1136.75" y="271.7144">state == runEnemy</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="1109.75,311.6167,1276.75,311.6167,1288.75,330.8237,1276.75,350.0308,1109.75,350.0308,1097.75,330.8237,1109.75,311.6167" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="1109.75" y="321.8271">enemy is still alive</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="1141.75" y="334.6318">and able to perform its</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="1141.75" y="347.4365">selected ability</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="1076.75" y="328.2295">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1288.75" y="328.2295">no</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="313" x="890.5" y="360.0308"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="293" x="900.5" y="381.1694">run enemy selected ability on selected target(s)</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="957" y="428.9995"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="967" y="450.1382">print results to combat log</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="61.9063" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="1223.5" y="360.0308"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="1233.5" y="381.1694">print to combat log</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="1233.5" y="395.1382">that the enemy struggles</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="212" x="1233.5" y="409.1069">futiley in some appropriate manner</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="1193.25,468.9683,1205.25,480.9683,1193.25,492.9683,1181.25,480.9683,1193.25,468.9683" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="1110.75" y="527.9683"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="145" x="1120.75" y="549.1069">state = beginNewRound</text><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="753.75,157.9375,765.75,169.9375,753.75,181.9375,741.75,169.9375,753.75,157.9375" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" points="716.75,1062.4292,790.75,1062.4292,802.75,1074.4292,790.75,1086.4292,716.75,1086.4292,704.75,1074.4292,716.75,1062.4292" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="716.75" y="1078.2373">combat end?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="802.75" y="1071.835">no</text><rect fill="#FEFECE" filter="url(#fz2qt3jwlhjiu)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="687.25" y="1127.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="697.25" y="1148.9668">endCombat(result)</text><ellipse cx="753.75" cy="1192.7969" fill="#FFFFFF" filter="url(#fz2qt3jwlhjiu)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="753.75" cy="1192.7969" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="30" y2="50"/><polygon fill="#A80036" points="749.75,40,753.75,50,757.75,40,753.75,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="83.9688" y2="103.9688"/><polygon fill="#A80036" points="749.75,93.9688,753.75,103.9688,757.75,93.9688,753.75,97.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="345.5854" y2="380.5854"/><polygon fill="#A80036" points="104,370.5854,108,380.5854,112,370.5854,108,374.5854" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="473.5542" y2="497.9565"/><polygon fill="#A80036" points="104,487.9565,108,497.9565,112,487.9565,108,491.9565" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="157" x2="169" y1="461.5542" y2="461.5542"/><polygon fill="#A80036" points="165,504.9409,169,514.9409,173,504.9409,169,508.9409" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="169" x2="169" y1="461.5542" y2="568.3276"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="169" x2="120" y1="568.3276" y2="568.3276"/><polygon fill="#A80036" points="130,564.3276,120,568.3276,130,572.3276,126,568.3276" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="531.9253" y2="556.3276"/><polygon fill="#A80036" points="104,546.3276,108,556.3276,112,546.3276,108,550.3276" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="414.5542" y2="449.5542"/><polygon fill="#A80036" points="104,439.5542,108,449.5542,112,439.5542,108,443.5542" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="484.5" x2="484.5" y1="345.5854" y2="380.5854"/><polygon fill="#A80036" points="480.5,370.5854,484.5,380.5854,488.5,370.5854,484.5,374.5854" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="806.5229" y2="826.5229"/><polygon fill="#A80036" points="342.5,816.5229,346.5,826.5229,350.5,816.5229,346.5,820.5229" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="860.4917" y2="880.4917"/><polygon fill="#A80036" points="342.5,870.4917,346.5,880.4917,350.5,870.4917,346.5,874.4917" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="914.4604" y2="934.4604"/><polygon fill="#A80036" points="342.5,924.4604,346.5,934.4604,350.5,924.4604,346.5,928.4604" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="701.2573" y2="772.5542"/><polygon fill="#A80036" points="342.5,762.5542,346.5,772.5542,350.5,762.5542,346.5,766.5542" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.5" x2="622.5" y1="659.3511" y2="694.3511"/><polygon fill="#A80036" points="618.5,684.3511,622.5,694.3511,626.5,684.3511,622.5,688.3511" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.5" x2="622.5" y1="728.3198" y2="763.3198"/><polygon fill="#A80036" points="618.5,753.3198,622.5,763.3198,626.5,753.3198,622.5,757.3198" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="384" x2="346.5" y1="603.3823" y2="603.3823"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="603.3823" y2="625.3823"/><polygon fill="#A80036" points="342.5,615.3823,346.5,625.3823,350.5,615.3823,346.5,619.3823" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="585" x2="622.5" y1="603.3823" y2="603.3823"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.5" x2="622.5" y1="603.3823" y2="625.3823"/><polygon fill="#A80036" points="618.5,615.3823,622.5,625.3823,626.5,615.3823,622.5,619.3823" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="968.4292" y2="998.4292"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="472.5" y1="998.4292" y2="998.4292"/><polygon fill="#A80036" points="462.5,994.4292,472.5,998.4292,462.5,1002.4292,466.5,998.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.5" x2="622.5" y1="797.2886" y2="998.4292"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="622.5" x2="496.5" y1="998.4292" y2="998.4292"/><polygon fill="#A80036" points="506.5,994.4292,496.5,998.4292,506.5,1002.4292,502.5,998.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="484.5" x2="484.5" y1="545.0854" y2="591.3823"/><polygon fill="#A80036" points="480.5,581.3823,484.5,591.3823,488.5,581.3823,484.5,585.3823" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="484.5" x2="484.5" y1="414.5542" y2="497.1479"/><polygon fill="#A80036" points="480.5,487.1479,484.5,497.1479,488.5,487.1479,484.5,491.1479" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047" x2="1047" y1="393.9995" y2="428.9995"/><polygon fill="#A80036" points="1043,418.9995,1047,428.9995,1051,418.9995,1047,422.9995" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1097.75" x2="1047" y1="330.8237" y2="330.8237"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047" x2="1047" y1="330.8237" y2="360.0308"/><polygon fill="#A80036" points="1043,350.0308,1047,360.0308,1051,350.0308,1047,354.0308" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1288.75" x2="1339.5" y1="330.8237" y2="330.8237"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1339.5" x2="1339.5" y1="330.8237" y2="360.0308"/><polygon fill="#A80036" points="1335.5,350.0308,1339.5,360.0308,1343.5,350.0308,1339.5,354.0308" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047" x2="1047" y1="462.9683" y2="480.9683"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1047" x2="1181.25" y1="480.9683" y2="480.9683"/><polygon fill="#A80036" points="1171.25,476.9683,1181.25,480.9683,1171.25,484.9683,1175.25,480.9683" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1339.5" x2="1339.5" y1="421.937" y2="480.9683"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1339.5" x2="1205.25" y1="480.9683" y2="480.9683"/><polygon fill="#A80036" points="1215.25,476.9683,1205.25,480.9683,1215.25,484.9683,1211.25,480.9683" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1193.25" x2="1193.25" y1="492.9683" y2="527.9683"/><polygon fill="#A80036" points="1189.25,517.9683,1193.25,527.9683,1197.25,517.9683,1193.25,521.9683" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="279.9063" y2="311.6167"/><polygon fill="#A80036" points="104,301.6167,108,311.6167,112,301.6167,108,305.6167" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="580.3276" y2="1042.4292"/><polygon fill="#A80036" points="104,1032.4292,108,1042.4292,112,1032.4292,108,1036.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="484.5" x2="484.5" y1="279.9063" y2="311.6167"/><polygon fill="#A80036" points="480.5,301.6167,484.5,311.6167,488.5,301.6167,484.5,305.6167" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="484.5" x2="484.5" y1="1010.4292" y2="1042.4292"/><polygon fill="#A80036" points="480.5,1032.4292,484.5,1042.4292,488.5,1032.4292,484.5,1036.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1193.25" x2="1193.25" y1="279.9063" y2="311.6167"/><polygon fill="#A80036" points="1189.25,301.6167,1193.25,311.6167,1197.25,301.6167,1193.25,305.6167" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1193.25" x2="1193.25" y1="561.937" y2="1042.4292"/><polygon fill="#A80036" points="1189.25,1032.4292,1193.25,1042.4292,1197.25,1032.4292,1193.25,1036.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="193.5" x2="413" y1="267.9063" y2="267.9063"/><polygon fill="#A80036" points="403,263.9063,413,267.9063,403,271.9063,407,267.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="556" x2="1124.75" y1="267.9063" y2="267.9063"/><polygon fill="#A80036" points="1114.75,263.9063,1124.75,267.9063,1114.75,271.9063,1118.75,267.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="235.9063" y2="240.9063"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="108" y1="240.9063" y2="240.9063"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="240.9063" y2="255.9063"/><polygon fill="#A80036" points="104,245.9063,108,255.9063,112,245.9063,108,249.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1261.75" x2="1469.5" y1="267.9063" y2="267.9063"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1469.5" x2="1469.5" y1="267.9063" y2="1042.4292"/><polygon fill="#A80036" points="1465.5,1032.4292,1469.5,1042.4292,1473.5,1032.4292,1469.5,1036.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="1469.5" y1="1042.4292" y2="1042.4292"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="181.9375" y2="201.9375"/><polygon fill="#A80036" points="749.75,191.9375,753.75,201.9375,757.75,191.9375,753.75,195.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="802.75" x2="1487.5" y1="1074.4292" y2="1074.4292"/><polygon fill="#A80036" points="1483.5,669.6362,1487.5,659.6362,1491.5,669.6362,1487.5,665.6362" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1487.5" x2="1487.5" y1="169.9375" y2="1074.4292"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1487.5" x2="765.75" y1="169.9375" y2="169.9375"/><polygon fill="#A80036" points="775.75,165.9375,765.75,169.9375,775.75,173.9375,771.75,169.9375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="1491.5" y="1078.2373">async fn</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="1042.4292" y2="1062.4292"/><polygon fill="#A80036" points="749.75,1052.4292,753.75,1062.4292,757.75,1052.4292,753.75,1056.4292" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="137.9375" y2="157.9375"/><polygon fill="#A80036" points="749.75,147.9375,753.75,157.9375,757.75,147.9375,753.75,151.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="1086.4292" y2="1127.8281"/><polygon fill="#A80036" points="749.75,1117.8281,753.75,1127.8281,757.75,1117.8281,753.75,1121.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="757.75" y="1107.7339">yes</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="753.75" x2="753.75" y1="1161.7969" y2="1181.7969"/><polygon fill="#A80036" points="749.75,1171.7969,753.75,1181.7969,757.75,1171.7969,753.75,1175.7969" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8a8fc42b65f94073b5b358a2d3f39805]
@startuml
start
:MootyWortRpgMech.enterCombat();
:Combat.controllerState = beginNewRound;
repeat
:stepCombat();
if (state == beginNewRound) then (yes)
  :processRoundTop();
  :status effects are processed;
  if (combat end?) then (no)
  	:runAI();
  endif
elseif (state == playerInput) then (yes)
	:combat.telegraphAction(enemychosenAbility);
	:displayTelegraph(teleString);
	partition commandSelection {
		:define onclick() cb functions for 
		available command UI;
		note right
		commands such as 'magic' will 
		open sub menus, and leaf node
		command will actually execute an
		ability
		end note
		if (selected ability is single target) then (yes)
		:the command listitem onclick() 
		will define onclick() for 
		possible targets that runs 
		the ability and advances combat;
		partition targetSelection {
			:player selects target image;
			:run the ability on selected target;
            :print result to combat log;
            :state = runEnemy;
		}
		else (no)
			:run the ability on appropriate target group;
            :print result to combat log;
            :state = runEnemy;
		endif
	}
elseif (state == runEnemy) then (yes)
	if (enemy is still alive 
	and able to perform its 
	selected ability) then (yes)
		:run enemy selected ability on selected target(s);
        :print results to combat log;
    else (no)
    	:print to combat log 
    	that the enemy struggles 
    	futiley in some appropriate manner;
	endif
	:state = beginNewRound;
endif
repeat while (combat end?) is (no) -> async fn
	->yes;
	:endCombat(result);
stop
@enduml

PlantUML version 1.2020.09beta16(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>